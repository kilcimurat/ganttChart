<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Weekly Gantt Chart (2025–2028)</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h2 { text-align: center; margin-bottom: 15px; }
  table { border-collapse: collapse; width: 100%; font-size: 12px; table-layout: fixed; }
  th, td { border: 1px solid #ccc; padding: 3px; text-align: center; }
  th.year { background: #001f3f; color: #fff; font-weight: 700; font-size: 13px; }
  th.month { background: #004d80; color: #fff; font-weight: 600; }
  th.week { background: #0074cc; color: #fff; font-weight: 500; }
  .task-name { text-align: left; background: #f0f0f0; font-weight: 500; white-space: nowrap; }
</style>
</head>
<body>

<h2>Weekly Gantt Chart (2025–2028, Continuous Weeks)</h2>
<table id="gantt"></table>

<script>
  const months = [
    "January","February","March","April","May","June",
    "July","August","September","October","November","December"
  ];
  // Yaklaşık haftalar
  const weeksPerMonth = [5,4,4,4,5,4,4,5,4,4,5,4]; // toplam 52

  // Her yılın haftalarını sırayla üret
  function generateYearWeeks(year) {
    const weeks = [];
    let weekCounter = 1;
    months.forEach((month, i) => {
      for (let w = 0; w < weeksPerMonth[i]; w++) {
        weeks.push({
          year,
          month,
          weekOfYear: weekCounter,
          label: `W${weekCounter}`
        });
        weekCounter++;
      }
    });
    return weeks;
  }

  // 2025–2028 arası haftalar
  const allWeeks = [];
  for (let y = 2025; y <= 2028; y++) {
    allWeeks.push(...generateYearWeeks(y));
  }

  // Örnek görevler
  const tasks = [
    { name: "Design", start: "2025-W1", end: "2025-W5" },
    { name: "Backend Development", start: "2025-W6", end: "2025-W25" },
    { name: "Frontend Development", start: "2025-W10", end: "2025-W30" },
    { name: "Integration", start: "2025-W31", end: "2025-W40" },
    { name: "Testing & QA", start: "2025-W41", end: "2025-W48" },
    { name: "Release", start: "2025-W49", end: "2025-W52" },
    { name: "Maintenance", start: "2026-W1", end: "2028-W52" }
  ];

  const table = document.getElementById("gantt");

  // === 1. Yıl satırı ===
  const yearRow = document.createElement("tr");
  let currentYear = null;
  let yearSpan = 0;
  let yearCells = "";
  allWeeks.forEach((w, idx) => {
    if (w.year !== currentYear) {
      if (yearSpan > 0) {
        yearCells += `<th class="year" colspan="${yearSpan}">${currentYear}</th>`;
      }
      currentYear = w.year;
      yearSpan = 1;
    } else {
      yearSpan++;
    }
    if (idx === allWeeks.length - 1) {
      yearCells += `<th class="year" colspan="${yearSpan}">${currentYear}</th>`;
    }
  });
  yearRow.innerHTML = `<th rowspan="3">Task</th>` + yearCells;
  table.appendChild(yearRow);

  // === 2. Ay satırı ===
  const monthRow = document.createElement("tr");
  let monthCells = "";
  let currentMonth = "";
  let currentYearForMonth = null;
  let monthSpan = 0;
  allWeeks.forEach((w, idx) => {
    if (w.month !== currentMonth || w.year !== currentYearForMonth) {
      if (monthSpan > 0) {
        monthCells += `<th class="month" colspan="${monthSpan}">${currentMonth}</th>`;
      }
      currentMonth = w.month;
      currentYearForMonth = w.year;
      monthSpan = 1;
    } else {
      monthSpan++;
    }
    if (idx === allWeeks.length - 1) {
      monthCells += `<th class="month" colspan="${monthSpan}">${currentMonth}</th>`;
    }
  });
  monthRow.innerHTML = monthCells;
  table.appendChild(monthRow);

  // === 3. Hafta satırı ===
  const weekRow = document.createElement("tr");
  weekRow.innerHTML = allWeeks.map(w => `<th class="week">${w.label}</th>`).join("");
  table.appendChild(weekRow);

  // === 4. Görev satırları ===
  tasks.forEach(task => {
    const row = document.createElement("tr");
    row.innerHTML = `<td class="task-name">${task.name}</td>`;
    allWeeks.forEach(w => {
      const id = `${w.year}-W${w.weekOfYear}`;
      const td = document.createElement("td");
      if (isBetweenWeeks(id, task.start, task.end)) {
        td.style.background = "#00b894";
      }
      row.appendChild(td);
    });
    table.appendChild(row);
  });

  // === Yardımcı fonksiyon ===
  function isBetweenWeeks(current, start, end) {
    const order = id => {
      const [y, wk] = id.split("-W");
      return parseInt(y) * 100 + parseInt(wk);
    };
    return order(current) >= order(start) && order(current) <= order(end);
  }
</script>

</body>
</html>
