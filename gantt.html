<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Accurate Weekly Gantt Header (2025–2028)</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  table { border-collapse: collapse; width: 100%; font-size: 12px; table-layout: fixed; }
  th, td { border: 1px solid #ccc; padding: 3px; text-align: center; }
  th.year { background: #001f3f; color: #fff; font-weight: 700; font-size: 13px; }
  th.month { background: #004d80; color: #fff; font-weight: 600; }
  th.week { background: #0074cc; color: #fff; font-weight: 500; }
</style>
</head>
<body>

<h2 style="text-align:center">Weekly Gantt Header (2025–2028)</h2>
<table id="gantt"></table>

<script>
// === Yardımcı Fonksiyonlar ===
function getISOWeek(date) {
  const tmp = new Date(date.getTime());
  tmp.setHours(0, 0, 0, 0);
  // Perşembe'yi temel al (ISO standardı)
  tmp.setDate(tmp.getDate() + 3 - ((tmp.getDay() + 6) % 7));
  const week1 = new Date(tmp.getFullYear(), 0, 4);
  return (
    1 +
    Math.round(
      ((tmp.getTime() - week1.getTime()) / 86400000 - 3 + ((week1.getDay() + 6) % 7)) / 7
    )
  );
}

// Belirli yılın toplam ISO haftası (52 veya 53)
function getWeeksInYear(year) {
  const d = new Date(year, 11, 31);
  return getISOWeek(d) === 1 ? 52 : getISOWeek(d);
}

// 2025–2028 arası haftaları oluştur
const allWeeks = [];
for (let year = 2025; year <= 2028; year++) {
  const totalWeeks = getWeeksInYear(year);
  for (let w = 1; w <= totalWeeks; w++) {
    const firstDay = new Date(year, 0, 1 + (w - 1) * 7);
    const month = firstDay.toLocaleString("en", { month: "long" });
    allWeeks.push({ year, month, week: w });
  }
}

// === Tablo oluştur ===
const table = document.getElementById("gantt");

// --- Yıl satırı ---
const yearRow = document.createElement("tr");
let currentYear = null, yearSpan = 0, yearCells = "";
allWeeks.forEach((w, idx) => {
  if (w.year !== currentYear) {
    if (yearSpan > 0) yearCells += `<th class="year" colspan="${yearSpan}">${currentYear}</th>`;
    currentYear = w.year; yearSpan = 1;
  } else yearSpan++;
  if (idx === allWeeks.length - 1)
    yearCells += `<th class="year" colspan="${yearSpan}">${currentYear}</th>`;
});
yearRow.innerHTML = yearCells;
table.appendChild(yearRow);

// --- Ay satırı ---
const monthRow = document.createElement("tr");
let currentMonth = "", currentYearForMonth = null, monthSpan = 0, monthCells = "";
allWeeks.forEach((w, idx) => {
  if (w.month !== currentMonth || w.year !== currentYearForMonth) {
    if (monthSpan > 0)
      monthCells += `<th class="month" colspan="${monthSpan}">${currentMonth}</th>`;
    currentMonth = w.month; currentYearForMonth = w.year; monthSpan = 1;
  } else monthSpan++;
  if (idx === allWeeks.length - 1)
    monthCells += `<th class="month" colspan="${monthSpan}">${currentMonth}</th>`;
});
monthRow.innerHTML = monthCells;
table.appendChild(monthRow);

// --- Hafta satırı ---
const weekRow = document.createElement("tr");
weekRow.innerHTML = allWeeks.map(w => `<th class="week">Week ${w.week}</th>`).join("");
table.appendChild(weekRow);
</script>

</body>
</html>
