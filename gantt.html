<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Fixed Size Weekly Gantt Chart (2025â€“2028)</title>
<style>
  body {
    font-family: "Segoe UI", Arial, sans-serif;
    margin: 20px;
    background: #f8f9fb;
  }
  h2 {
    text-align: center;
    color: #003366;
    margin-bottom: 16px;
  }

  .gantt-container {
    overflow-x: auto;
    overflow-y: auto;
    max-height: 80vh;
    border-radius: 6px;
    box-shadow: 0 0 8px rgba(0,0,0,0.1);
    background: white;
  }

  table {
    border-collapse: collapse;
    width: max-content;
    font-size: 12px;
  }

  th, td {
    border: 1px solid #d0d7e3;
    text-align: center;
    padding: 4px;
  }

  th.year, th.month, th.week { width: 70px; min-width: 70px; }

  th.year {
    background: #001f3f;
    color: white;
    font-size: 13px;
    font-weight: 700;
    position: sticky;
    top: 0;
    z-index: 3;
  }
  th.month {
    background: #005fa3;
    color: white;
    font-weight: 600;
    position: sticky;
    top: 22px;
    z-index: 2;
    white-space: nowrap;
  }
  th.week {
    background: #0074cc;
    color: #fff;
    font-weight: 500;
    position: sticky;
    top: 44px;
    z-index: 1;
    white-space: nowrap;
  }

  td.task-name {
    background: #f0f4f8;
    font-weight: 600;
    text-align: left;
    color: #003366;
    min-width: 150px;
    position: sticky;
    left: 0;
    z-index: 4;
  }

  td.bar {
    background: #00b894;
  }

  /* ðŸ”´ Bulunulan haftanÄ±n tamamÄ±nÄ± renklendir */
  .today-column {
    background: rgba(255, 0, 0, 0.12) !important;
  }

  tr:hover td {
    background-color: #f8ffff;
  }
</style>
</head>
<body>

<h2>Weekly Gantt Chart (2025â€“2028)</h2>
<div class="gantt-container" id="gantt-container">
  <table id="gantt"></table>
</div>

<script>
  // === YardÄ±mcÄ± Fonksiyonlar ===
  function getISOWeek(date) {
    const tmp = new Date(date.getTime());
    tmp.setHours(0, 0, 0, 0);
    tmp.setDate(tmp.getDate() + 3 - ((tmp.getDay() + 6) % 7));
    const week1 = new Date(tmp.getFullYear(), 0, 4);
    return 1 + Math.round(((tmp - week1) / 86400000 - 3 + ((week1.getDay() + 6) % 7)) / 7);
  }

  function getWeeksInYear(year) {
    const d = new Date(year, 11, 31);
    return getISOWeek(d) === 1 ? 52 : getISOWeek(d);
  }

  // === HaftalarÄ± oluÅŸtur ===
  const allWeeks = [];
  for (let year = 2025; year <= 2028; year++) {
    const totalWeeks = getWeeksInYear(year);
    for (let w = 1; w <= totalWeeks; w++) {
      const d = new Date(year, 0, 1 + (w - 1) * 7);
      const month = d.toLocaleString("en", { month: "long" });
      allWeeks.push({ year, month, week: w });
    }
  }

  // === GÃ¶revler ===
  const tasks = [
    { name: "Design", start: "2025-W1", end: "2025-W5" },
    { name: "Backend Development", start: "2025-W6", end: "2025-W25" },
    { name: "Frontend Development", start: "2025-W10", end: "2025-W30" },
    { name: "Integration", start: "2025-W31", end: "2025-W40" },
    { name: "Testing & QA", start: "2025-W41", end: "2025-W48" },
    { name: "Release", start: "2025-W49", end: "2025-W52" }
  ];

  const table = document.getElementById("gantt");

  // === 1. SatÄ±r: YÄ±llar ===
  const yearRow = document.createElement("tr");
  let currentYear = null, yearSpan = 0, yearCells = "";
  allWeeks.forEach((w, i) => {
    if (w.year !== currentYear) {
      if (yearSpan > 0)
        yearCells += `<th class="year" colspan="${yearSpan}">${currentYear}</th>`;
      currentYear = w.year; yearSpan = 1;
    } else yearSpan++;
    if (i === allWeeks.length - 1)
      yearCells += `<th class="year" colspan="${yearSpan}">${currentYear}</th>`;
  });
  yearRow.innerHTML = `<th rowspan="3" class="year" style="min-width:150px;">Task</th>` + yearCells;
  table.appendChild(yearRow);

  // === 2. SatÄ±r: Aylar ===
  const monthRow = document.createElement("tr");
  let currentMonth = "", currentYearForMonth = null, monthSpan = 0, monthCells = "";
  allWeeks.forEach((w, i) => {
    if (w.month !== currentMonth || w.year !== currentYearForMonth) {
      if (monthSpan > 0)
        monthCells += `<th class="month" colspan="${monthSpan}">${currentMonth}</th>`;
      currentMonth = w.month;
      currentYearForMonth = w.year;
      monthSpan = 1;
    } else monthSpan++;
    if (i === allWeeks.length - 1)
      monthCells += `<th class="month" colspan="${monthSpan}">${currentMonth}</th>`;
  });
  monthRow.innerHTML = monthCells;
  table.appendChild(monthRow);

  // === 3. SatÄ±r: Haftalar ===
  const weekRow = document.createElement("tr");
  weekRow.innerHTML = allWeeks.map(w => `<th class="week" id="${w.year}-W${w.week}">w${w.week}</th>`).join("");
  table.appendChild(weekRow);

  // === GÃ¶rev SatÄ±rlarÄ± ===
  const rowElements = [];
  tasks.forEach(task => {
    const row = document.createElement("tr");
    row.innerHTML = `<td class="task-name">${task.name}</td>`;
    allWeeks.forEach(w => {
      const id = `${w.year}-W${w.week}`;
      const td = document.createElement("td");
      td.dataset.week = id;
      if (isBetweenWeeks(id, task.start, task.end)) td.classList.add("bar");
      row.appendChild(td);
    });
    table.appendChild(row);
    rowElements.push(row);
  });

  function isBetweenWeeks(current, start, end) {
    const order = id => {
      const [y, wk] = id.split("-W");
      return parseInt(y) * 100 + parseInt(wk);
    };
    return order(current) >= order(start) && order(current) <= order(end);
  }

  // === ðŸ”´ BugÃ¼nÃ¼n haftasÄ±nÄ± bul ve o haftanÄ±n sÃ¼tununu renklendir ===
  const today = new Date();
  const todayYear = today.getFullYear();
  const todayWeek = getISOWeek(today);
  const todayId = `${todayYear}-W${todayWeek}`;
  const todayEl = document.getElementById(todayId);

  if (todayEl) {
    // HaftanÄ±n tÃ¼m sÃ¼tun hÃ¼crelerini bul
    document.querySelectorAll(`[data-week='${todayId}']`).forEach(cell => {
      cell.classList.add("today-column");
    });

    // Ãœstteki haftalÄ±k baÅŸlÄ±ÄŸÄ± da belirgin yap
    todayEl.style.background = "#e74c3c";
    todayEl.style.color = "white";

    // Ortalamak iÃ§in container kaydÄ±r
    const container = document.getElementById("gantt-container");
    const offsetLeft = todayEl.offsetLeft - container.clientWidth / 2 + todayEl.clientWidth / 2;
    container.scrollLeft = offsetLeft;
  }
</script>

</body>
</html>
